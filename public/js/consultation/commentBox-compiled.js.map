{"version":3,"sources":["commentBox.jsx"],"names":[],"mappings":"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","file":"commentBox-compiled.js","sourcesContent":["(function(){\n\n\n    scify.CommentBox = React.createClass({\n        getInitialState : function(){\n            return { comments: [], //the comments that will be displayed (either all comments or top comments)\n                allComments: [], //in case we display a subset of comments, this array contains all the comments\n                topComments:[], //contains the top comments, the one with the most likes\n                discussionThreadId: this.props.discussionthreadid,\n                totalCommentsCount: this.props.commentsCount,\n                messages: this.props.messages\n            };\n        },\n        findTopComments : function(comments){\n\n            if (comments.length<9)\n                return comments;  //dont filter;\n\n            var topComments =_.filter(comments,function(comment){\n                return comment.likesCounter >0;\n            }); //get all comments with likes,\n\n            topComments =_.sortBy(topComments,function(comment){ // sort comments by likes descending\n               return    -comment.likesCounter;\n            })\n\n            if (topComments.length>1) //display the first 5 comments if we have at least two 2 top comments\n                return topComments.splice(0,5);\n            else\n                return comments;\n\n        },\n        topCommentsAreDisplayed : function(){\n            return this.state.topComments.length == this.state.comments.length;\n        },\n        commentsLoadedFromServer: function(){\n            return this.state.allComments.length>0;\n        },\n        getCommentsFromServer : function(){\n            var instance = this;\n\n           var promise = $.ajax({\n                method: \"GET\",\n                url: \"/comments/retrieve\",\n                cache:false,\n                data:{\n                    consultationId :this.props.consultationid,\n                    articleId :this.props.articleid,\n                    source : this.props.source,\n                    discussionthreadid : this.state.discussionthreadid,\n                    discussionthreadclientid: this.props.discussionthreadclientid\n                },\n                beforeSend: function(){\n                    instance.state.busy=true;\n                    instance.setState(instance.state);\n                },\n                success : function(data){\n                    instance.state.allComments = data;\n                    instance.state.topComments = instance.findTopComments(data);\n                    instance.state.comments =instance.state.topComments;\n                    instance.state.busy=false;\n                    instance.state.display=true;\n\n                    instance.setState(instance.state);\n\n                },\n                error: function(x,z,y){\n                    alert(x)\n                }\n            });\n\n            return promise;\n        },\n        loadAll: function(){\n            this.setState({comments:this.state.allComments})\n        },\n        saveComment : function(url,data){\n            var instance = this;\n\n            var postedData = {\n                consultationId : this.props.consultationid,\n                articleId: this.props.articleid,\n                discussionThreadId : instance.state.discussionthreadid,\n                discussionthreadclientid : this.props.discussionthreadclientid, //the id generated by javascript\n                discussionthreadtypeid : data.discussionroomtypeid,\n                discussionThreadText: this.props.discussionThreadText, //contains the whole discussion thread text\n                fullName :this.props.fullName,\n                dateAdded : new Date(),\n                userAnnotatedText: data.userAnnotatedText,\n                body : data.body,\n                annotationTagTopics : data.annotationTagTopics,\n                annotationTagProblems : data.annotationTagProblems,\n                emotionId : data.emotionId\n            };\n\n            //todo: cancel any previous events\n            $.ajax({\n                method: \"POST\",\n                url: url,\n                data: JSON.stringify(postedData),\n                dataType: \"json\",\n                contentType: \"application/json; charset=utf-8\",\n                beforeSend:function(){\n                    instance.state.display=true;\n                    instance.state.busy=true;\n                    instance.setState(instance.state);\n                },\n                success : function(comment){\n                    instance.state.discussionthreadid = comment.discussionThread.id; //set discussion thread to state\n                    instance.state.totalCommentsCount = instance.state.totalCommentsCount+1;\n\n                    if (instance.commentsLoadedFromServer())\n                    {\n                        instance.state.allComments.unshift(comment);\n                        //if we have comments loaded, and all are displayed (not just the top comments) also display the new one\n                        if (!instance.topCommentsAreDisplayed())\n                            instance.state.comments.unshift(comment);\n                    }\n                },\n                complete: function(){\n\n                     if (instance.commentsLoadedFromServer())\n                     {\n                         instance.state.busy=false;\n                         instance.setState(instance.state);\n                     }\n                    else\n                     {\n                         instance.getCommentsFromServer.call(instance);\n                     }\n\n                }\n            });\n\n        },\n        updateComment : function(url,data){\n            var instance = this;\n            var postedData = {\n                commentId: data.commentId,\n                consultationId : this.props.consultationid,\n                articleId: this.props.articleid,\n                fullName :this.props.fullName,\n                dateAdded : new Date(),\n                userAnnotatedText: data.userAnnotatedText,\n                body : data.body,\n                annotationTagTopics : data.annotationTagTopics,\n                annotationTagProblems : data.annotationTagProblems,\n                emotionId : data.emotionId,\n                revision: data.revision\n            };\n\n            //todo: cancel any previous events\n            $.ajax({\n                method: \"POST\",\n                url: url,\n                data: JSON.stringify(postedData),\n                dataType: \"json\",\n                contentType: \"application/json; charset=utf-8\",\n                beforeSend:function(){\n                    instance.state.display=true;\n                    instance.state.busy=true;\n                    instance.setState(instance.state);\n                },\n                success : function(comment){\n                    if (instance.commentsLoadedFromServer())\n                    {\n                        //search for the old comment in the comments array\n                        for(var commentIndex=0; commentIndex<instance.state.allComments.length; commentIndex++) {\n                            //the new edited comment has the same id with the old version\n                            if(instance.state.allComments[commentIndex].id == comment.id) {\n                                var oldComment = instance.state.allComments[commentIndex];\n                                //store the replies of the old comment to the new one\n                                comment.commentReplies = oldComment.commentReplies;\n                                //store the discussionThread object of the old comment to the new one\n                                comment.discussionThread = oldComment.discussionThread;\n                                instance.state.discussionthreadid = oldComment.discussionThread.id; //set discussion thread to state\n                                //store the new comment where the old one was\n                                instance.state.allComments[commentIndex] = comment;\n                            }\n                        }\n\n                    }\n                },\n                complete: function(){\n\n                    if (instance.commentsLoadedFromServer())\n                    {\n                        instance.state.busy=false;\n                        instance.setState(instance.state);\n                    }\n                    else\n                    {\n                        instance.getCommentsFromServer.call(instance);\n                    }\n\n                }\n            });\n\n        },\n        setVisibibility : function(display){\n            this.state.display=display;\n            this.setState(this.state);\n        },\n        refreshComments : function(){\n            var instance = this;\n            if (instance.state.totalCommentsCount > instance.state.comments.length )\n                instance.getCommentsFromServer.call(instance);\n            else if (instance.state.display)\n                instance.setVisibibility.call(instance,false);\n            else\n                instance.setVisibibility.call(instance,true);\n        },\n        toogleBox: function(){\n            this.state.display= !this.state.display;\n            this.setState(this.state);\n        },\n        shouldDisplayLoadMoreOption : function(){\n             return  this.state.totalCommentsCount > this.state.comments.length;\n        },\n        render: function() {\n            if (this.state.busy)\n            {\n                return (\n                    <div>\n                        <TotalCommentsLink onClick={this.refreshComments} count={this.state.totalCommentsCount} messages={this.state.messages}/>\n                        <scify.ReactLoader display={this.state.busy} />\n                    </div>\n                );\n            }\n            var topClasses = classNames({hide: this.state.totalCommentsCount==0});\n            var commendBoxclasses = classNames(\"commentBox\",{ hide :!this.state.display});\n            var loadAllClasses =classNames(\"load-all\",{ hide :!this.shouldDisplayLoadMoreOption()});\n            var consultationId = this.props.consultationId;\n            return (\n\n                <div className={topClasses}>\n                    <TotalCommentsLink onClick={this.refreshComments}\n                                       count={this.state.totalCommentsCount}\n                                       source={this.props.source}\n                                       isdiscussionForTheWholeArticle={this.props.isdiscussionForTheWholeArticle}\n                                        messages={this.state.messages}/>\n                    <div className={commendBoxclasses }>\n                        <div className={loadAllClasses} >\n                            {this.state.messages.seeLabel} { this.state.comments.length } {this.state.messages.mostPopularComments}\n                            <a onClick={this.loadAll}>{this.state.messages.seeAllComments}</a>\n                        </div>\n                        <scify.CommentList\n                            consultationEndDate={this.props.consultationEndDate}\n                            annotationId = {this.props.annotationId}\n                            consultationId = {this.props.consultationId}\n                            userId = {this.props.userId}\n                            data={this.state.comments}\n                            parent={this.props.parent}\n                            userDefined={this.props.userDefined}\n                            imagesPath = {this.props.imagesPath}\n                            scrollToComment={this.props.scrollToComment}\n                            appState={this.props.appState}\n                            annId={this.props.annId}\n                            shouldDisplayCommenterName={this.props.shouldDisplayCommenterName}\n                            shouldDisplayEditIcon={this.props.shouldDisplayEditIcon}\n                            shouldDisplayCommentEdited={this.props.shouldDisplayCommentEdited}\n                            shouldDisplayShareBtn={this.props.shouldDisplayShareBtn}\n                            shouldDisplayCommentBody={this.props.shouldDisplayCommentBody}\n                            shouldDisplayEmotion={this.props.shouldDisplayEmotion}\n                            shouldDisplayAnnotatedText={this.props.shouldDisplayAnnotatedText}\n                            shouldDisplayReplyBox={this.props.shouldDisplayReplyBox}\n                            shouldDisplayReplies={this.props.shouldDisplayReplies}\n                            optionsEnabled={this.props.optionsEnabled}\n                            shouldDisplayTopics={this.props.shouldDisplayTopics}\n                            commentClassNames={this.props.commentClassNames}\n                            shouldDisplayFinalLawAnnBtn={this.props.shouldDisplayFinalLawAnnBtn}\n                            shouldDisplayLikeDislike={this.props.shouldDisplayLikeDislike}\n                            shouldDisplayReportAction={this.props.shouldDisplayReportAction}\n                            messages={this.state.messages}/>\n                    </div>\n                </div>\n\n            );\n        }\n    });\n    var TotalCommentsLink = React.createClass({\n        render : function(){\n\n            var label = this.props.messages.commentsLabel;\n            if (this.props.count==1)\n                label=this.props.messages.commentLabel;\n\n\n            if (this.props.source && this.props.source ==\"opengov\")\n                label +=\" \" + this.props.messages.commentsFromOpengov + \" \";\n\n            if (this.props.isdiscussionForTheWholeArticle)\n                label +=\" \" + this.props.messages.commentsForArticle;\n            else\n                label +=\" \" + this.props.messages.commentsForText;\n\n            if (this.props.count>0)\n                return (\n                    <a className=\"load\" onClick={this.props.onClick}>{this.props.count} {label} </a>\n                );\n            else //todo: how can i return an empty element?\n                return (<span></span>);\n        }\n    });\n\n    window.scify.CommentList = React.createClass({\n        render: function() {\n            var instance = this;\n            var commentNodes = this.props.data.map(function (comment) {\n                return (\n                    <div className={instance.props.parent}>\n                    <scify.Comment scrollToComment={instance.props.scrollToComment}\n                                   imagesPath = {instance.props.imagesPath}\n                                   userId={instance.props.userId}\n                                   userDefined={instance.props.userDefined}\n                                   parent={instance.props.parent}\n                                   consultationEndDate={instance.props.consultationEndDate}\n                                   key={comment.id}\n                                   data={comment}\n                                   annotationId = {instance.props.annotationId}\n                                   consultationId = {instance.props.consultationId}\n                                   appState={instance.props.appState}\n                                   annId={instance.props.annId}\n                                   revision={comment.revision}\n                                   shouldDisplayCommenterName={instance.props.shouldDisplayCommenterName}\n                                   shouldDisplayEditIcon={instance.props.shouldDisplayEditIcon}\n                                   shouldDisplayCommentEdited={instance.props.shouldDisplayCommentEdited}\n                                   shouldDisplayShareBtn={instance.props.shouldDisplayShareBtn}\n                                   shouldDisplayCommentBody={instance.props.shouldDisplayCommentBody}\n                                   shouldDisplayEmotion={instance.props.shouldDisplayEmotion}\n                                   shouldDisplayAnnotatedText={instance.props.shouldDisplayAnnotatedText}\n                                   shouldDisplayReplyBox={instance.props.shouldDisplayReplyBox}\n                                   shouldDisplayReplies={instance.props.shouldDisplayReplies}\n                                   optionsEnabled={instance.props.optionsEnabled}\n                                   shouldDisplayTopics={instance.props.shouldDisplayTopics}\n                                   commentClassNames={instance.props.commentClassNames}\n                                   shouldDisplayFinalLawAnnBtn={instance.props.shouldDisplayFinalLawAnnBtn}\n                                   shouldDisplayLikeDislike={instance.props.shouldDisplayLikeDislike}\n                                   shouldDisplayReportAction={instance.props.shouldDisplayReportAction}\n                                   messages={instance.props.messages}/>\n                    </div>\n                );\n            });\n\n            return (\n                <div className=\"commentList\">\n                    {commentNodes}\n                </div>\n            );\n        }\n    });\n    window.scify.Comment = React.createClass({\n        getInitialState: function(){\n            function sortByKey(array, key) {\n                return array.sort(function(a, b) {\n                    var x = a[key]; var y = b[key];\n                    return ((x > y) ? -1 : ((x < y) ? 1 : 0));\n                });\n\n            }\n            if(this.props.data.commentReplies!= undefined)\n                if(this.props.data.commentReplies.length > 1)\n                    sortByKey(this.props.data.commentReplies, 'dateAdded');\n            return {\n                likeCounter: this.props.data.likesCounter,\n                dislikeCounter: this.props.data.dislikesCounter,\n                liked : this.props.data.loggedInUserRating,  //if not null it means has liked/disliked this comment\n                comment: this.props.data,\n                displayReplyBox: false,\n                displayReportModal:false,\n                messages: this.props.messages\n            };\n        },\n        componentDidMount : function(){\n            var instance = this;\n            $(React.findDOMNode(this)).find('[data-toggle=\"tooltip\"]').tooltip();\n            if(this.props.scrollToComment != undefined && this.getHashValue(\"commentid\") == this.props.data.id) {\n                this.props.scrollToComment();\n            }\n\n            $(\"#shareComment-\" + instance.props.data.id).click(function() {\n                var commentId = $(this).attr('id').split('-')[1];\n                var annotationId = instance.props.annotationId;\n                //if annotationId is undefined, we are in reporter page, so we cannot get the annId from the DOM.\n                //we need to get it from the comment object\n                if(annotationId == undefined) {\n                    annotationId = instance.props.data.discussionThread.text.split('-')[1];\n                }\n                var longUrl =\"\";\n                $(\"#shareComment-\"+commentId).prev().toggleClass('shareArticleHiddenComment');\n                if(instance.props.appState == \"development\") {\n                    longUrl = \"http://localhost:9000/consultation/\";\n                } else {\n                    longUrl = \"http://democracit.org/consultation/\";\n                }\n                longUrl += instance.props.consultationId + \"#commentid=\" + commentId + \"&articleid=\" + instance.props.data.articleId + \"&annid=\" + annotationId;\n                //show the extra div\n                if($(\"#shareComment-\"+commentId).prev().find(\".shareUrl\").length == 0)\n                    $(\"#shareComment-\"+commentId).prev().append('<div class=\"shareUrl\"><a href=\"' + longUrl + '\">' + longUrl + '</a></div>');\n            });\n        },\n        getHashValue : function(key) {\n            var matches = location.hash.match(new RegExp(key+'=([^&]*)'));\n            return matches ? matches[1] : null;\n        },\n        handleReply: function() {\n            this.state.displayReplyBox = !this.state.displayReplyBox;\n            this.setState(this.state);\n        },\n        handleSavedComment: function(comment) {\n            //add the new comment to the list of replies\n            this.state.comment.commentReplies.unshift(comment);\n            this.setState(this.state);\n        },\n        handleEditComment: function(){\n            var commentToBeEdited = this.props.data;\n            commentToBeEdited.annId = \"ann-\" + this.props.annId;\n            //throw custom event on the body html passing the comment that will be edited. The comment should have its id populated\n            $(\"body\").trigger(\"editcomment\", commentToBeEdited);\n        },\n        render: function() {\n            //hide lock icon for open gov consultations, and for comments that we posted before the end of the consultation date\n            var iconsClasses = classNames(\"icons\",\n                {\n                    hide: this.props.data.source.commentSource == 2 ||\n                    this.props.data.dateAdded < this.props.consultationEndDate\n                });\n            var avatarDiv = <div className='avatar'><img src={this.props.data.avatarUrl ? this.props.data.avatarUrl : \"/assets/images/profile_default.jpg\"} /></div>;\n            var commentClassNames = this.props.commentClassNames;\n            return (\n                <div className={commentClassNames} id={this.props.data.id}>\n                    {avatarDiv}\n                    <div className='body'>\n                        {this.renderCommenterName(this.props.shouldDisplayCommenterName)}\n                        {this.renderEditIcon(this.props.shouldDisplayEditIcon)}\n                        {this.renderCommentEdited(this.props.shouldDisplayCommentEdited)}\n                        <div className=\"optionsRight\">\n                            {this.renderReportAction(this.props.shouldDisplayReportAction)}\n                            {this.renderShareBtn(this.props.shouldDisplayShareBtn)}\n                        </div>\n                        {this.renderCommentBody(this.props.shouldDisplayCommentBody)}\n                        {this.renderEmotion(this.props.shouldDisplayEmotion)}\n                        {this.renderAnnotatedText(this.props.shouldDisplayAnnotatedText)}\n                        {this.renderTopicsHtml(this.props.shouldDisplayTopics)}\n                    </div>\n                    {this.renderOptions(this.props.optionsEnabled)}\n                    <div className={iconsClasses}>\n                        <a data-toggle=\"tooltip\" data-original-title={this.state.messages.commentAfterConsEnd}><img src=\"/assets/images/closed.gif\"/></a>\n                     </div>\n                        {this.renderReplyBox(this.props.shouldDisplayReplyBox)}\n                        {this.renderReplies(this.props.shouldDisplayReplies)}\n                </div>\n            );\n        },\n        renderTopicsHtml: function(shouldDisplayTopics) {\n            if(shouldDisplayTopics) {\n                var taggedProblems = this.props.data.annotationTagProblems.map(function (tag) {\n                    if (tag != undefined) {\n                        return (\n                            <span className=\"tag pr\"><span>{tag.description}</span></span>\n                        );\n                    }\n                });\n                var taggedTopics = this.props.data.annotationTagTopics.map(function (tag) {\n                    if (tag != undefined) {\n                        return (\n                            <span className=\"tag topic\"><span >{\"#\" + tag.description }</span></span>\n                        );\n                    }\n                });\n                var taggedProblemsContainer = this.props.data.annotationTagProblems.length > 0 ?\n                    <span>{this.state.messages.problems}: { taggedProblems} </span> : \"\";\n                var taggedTopicsContainer = this.props.data.annotationTagTopics.length > 0 ?\n                    <span>{this.state.messages.category}: { taggedTopics} </span> : \"\";\n                if (taggedProblems.length > 0 || taggedTopics.length > 0)\n                    var topicsHtml = <div className=\"tags htmlText\"><i className=\"fa fa-thumb-tack\"></i><span\n                        className=\"partName\">{this.state.messages.topics}: </span>{taggedTopicsContainer} {taggedProblemsContainer}</div>;\n                return (topicsHtml);\n            }\n        },\n        renderShareBtn: function(shouldDisplayShareBtn) {\n            var commentSource = this.props.data.source;\n            //we only present the share button to the comments from DemocracIT (comment source ID is 1)\n            //we do not present the share button in the userCommentStats tab in reporter page\n            if(commentSource != undefined && shouldDisplayShareBtn) {\n                if(commentSource.commentSource == 1) {\n                    var commentIdForShare = this.props.data.id;\n                    var shareBtn = <div className=\"shareLink\"><span className=\"shareSpanComment shareArticleHiddenComment\">\n                        {this.state.messages.copyLink}:</span>\n                                        <span className=\"shareBtnComment\" title={this.state.messages.link} id={\"shareComment-\" + commentIdForShare}>\n                                            <i className=\"fa fa-link\"></i>\n                                        </span>\n                                   </div>;\n                    return(shareBtn);\n                }\n            }\n        },\n        renderCommentEdited: function(shouldDisplayCommentEdited){\n            if(shouldDisplayCommentEdited) {\n                if(this.props.data.revision > 1) {\n                    var commentEdited = <span className=\"editedComment\">{this.state.messages.userHasEdited}</span>\n                    return(commentEdited);\n                }\n            }\n        },\n        renderEditIcon: function(shouldDisplayEditIcon){\n            if(shouldDisplayEditIcon) {\n                var userId = this.props.userId;\n                var commenterId = this.props.data.userId;\n                if(userId == commenterId && userId != undefined) {\n                    var editIcon = <span className=\"editIcon\" title={this.state.messages.userEditPrompt} onClick={this.handleEditComment}><i className=\"fa fa-pencil-square-o\"></i></span>\n                    return(editIcon);\n                }\n            }\n        },\n        renderCommenterName: function(shouldDisplayCommenterName) {\n            if(shouldDisplayCommenterName) {\n                if (this.props.data.profileUrl)\n                    var commenterName = <span className=\"commentAuthor\"><a target=\"_blank\"\n                                                                       href={this.props.data.profileUrl}>{this.props.data.fullName}</a></span>;\n                else\n                    var commenterName = <span className=\"commentAuthor\">{this.props.data.fullName}</span>;\n                return(commenterName);\n            }\n        },\n        renderAvatar: function(shouldDisplayAvatar){\n            if(shouldDisplayAvatar) {\n                var avatarDiv = <div className='avatar'><img\n                    src={this.props.data.avatarUrl ? this.props.data.avatarUrl : \"/assets/images/profile_default.jpg\"}/>\n                </div>;\n                return (avatarDiv);\n            }\n        },\n        renderCommentBody: function(shouldDisplayCommentBody){\n            if(shouldDisplayCommentBody) {\n                var commentBody = <div className=\"htmlText\"><i className=\"fa fa-comment-o\"></i>\n                    <span className=\"partName\">{this.state.messages.commentLabelCapital}: </span><span dangerouslySetInnerHTML={{__html: this.props.data.body}}></span></div>;\n                return (commentBody);\n            }\n        },\n        renderAnnotatedText: function(shouldDisplayAnnotatedText){\n            if(shouldDisplayAnnotatedText) {\n                if(this.props.data.userAnnotatedText != null) {\n                    if(this.props.data.userAnnotatedText)\n                        if(this.props.data.discussionThread.discussion_thread_type_id == 2)\n                            var annotatedText = <div className=\"htmlText\"><i className=\"fa fa-file-text-o\"></i><span className=\"partName\">{this.state.messages.textPart}: </span><span dangerouslySetInnerHTML={{__html: this.props.data.userAnnotatedText}}></span></div>;\n                        else\n                            var annotatedText = <div className=\"htmlText\"><i className=\"fa fa-file-text-o\"></i><span className=\"partName\">{this.state.messages.articleName}: </span><span dangerouslySetInnerHTML={{__html: this.props.data.userAnnotatedText}}></span></div>;\n                }\n                return (annotatedText);\n            }\n        },\n        renderEmotion: function(shouldDisplayEmotion){\n            var emotionId = this.props.data.emotionId;\n            if(emotionId != undefined && shouldDisplayEmotion) {\n                var image=\"\";\n                switch(emotionId) {\n                    case 1:\n                        image = \"/emoticons/emoticon-superhappy.png\";\n                        break;\n                    case 2:\n                        image = \"/emoticons/emoticon-happy.png\"\n                        break;\n                    case 3:\n                        image = \"/emoticons/emoticon-worried.png\";\n                        break;\n                    case 4:\n                        image = \"/emoticons/emoticon-sad.png\";\n                        break;\n                    case 5:\n                        image = \"/emoticons/emoticon-angry.png\";\n                        break;\n                }\n                var imageWithPath = this.props.imagesPath + image;\n                var emotion = <div className=\"userEmotion htmlText\">{this.state.messages.userEmotionLabel}: <img src={imageWithPath}></img></div>;\n                return emotion;\n            }\n        },\n        renderReplyBox: function(shouldDisplayReplyBox){\n            if(shouldDisplayReplyBox) {\n                return (\n                    <scify.ReplyBox onReplySuccess={this.handleSavedComment}\n                                    discussionthreadclientid={this.props.data.discussionThread.id}\n                                    commenterId={this.props.data.userId}\n                                    userId={this.props.userId} parentId={this.props.data.id}\n                                    articleId={this.props.data.articleId}\n                                    display={this.state.displayReplyBox}\n                                    annotationId = {this.props.data.discussionThread.text.split(this.props.data.articleId)[1]}\n                                    consultationId = {this.props.consultationId}/>\n                );\n            }\n        },\n        renderReplies: function(shouldDisplayReplies){\n            if(shouldDisplayReplies && this.props.data.commentReplies != undefined) {\n                if(this.props.data.commentReplies.length > 0)\n                    return (\n                        <div>\n                            <div className=\"replyTitle\">{this.state.messages.repliesLabel}:</div>\n                            <scify.CommentList consultationEndDate={this.props.consultationEndDate}\n                                               userId={this.props.userId}\n                                               data={this.props.data.commentReplies}\n                                               userDefined={this.props.userDefined}\n                                               updateComments={this.handleSavedComment}\n                                               annotationId={this.props.annotationId}\n                                               appState={this.props.appState}\n                                               consultationId={this.props.consultationId}\n                                               scrollToComment={this.props.scrollToComment}\n                                               shouldDisplayCommenterName={true}\n                                               shouldDisplayEditIcon={false}\n                                               shouldDisplayCommentEdited={false}\n                                               shouldDisplayShareBtn={true}\n                                               shouldDisplayCommentBody={true}\n                                               shouldDisplayEmotion={false}\n                                               shouldDisplayAnnotatedText={false}\n                                               shouldDisplayReplyBox={false}\n                                               shouldDisplayReplies={false}\n                                               optionsEnabled={true}\n                                               shouldDisplayTopics={false}\n                                               commentClassNames=\"comment replyComment\"\n                                               shouldDisplayFinalLawAnnBtn={false}\n                                               messages={this.state.messages}\n                            />\n                        </div>\n                    );\n            }\n        },\n        renderOptions: function(optionsEnabled){\n            if(optionsEnabled) {\n                return(\n                    <CommentActionsEnabled\n                        consultationEndDate={this.props.consultationEndDate}\n                        userDefined={this.props.userDefined}\n                        handleReply={this.handleReply}\n                        source={this.props.data.source.commentSource}\n                        id={this.props.data.id}\n                        dateAdded={this.props.data.dateAdded}\n                        likeCounter={this.props.data.likesCounter}\n                        dislikeCounter={this.props.data.dislikesCounter}\n                        loggedInUserRating={this.props.data.loggedInUserRating}\n                        emotionId={this.props.data.emotionId}\n                        imagesPath={this.props.imagesPath}\n                        consultationId={this.props.consultationId}\n                        comment={this.props.data}\n                        imagesPath={this.props.imagesPath}\n                        shouldDisplayReplyBox={this.props.shouldDisplayReplyBox}\n                        shouldDisplayFinalLawAnnBtn={this.props.shouldDisplayFinalLawAnnBtn}\n                        messages={this.state.messages}/>\n                );\n            }\n            return (\n                <CommentActionsDisabled imagesPath={this.props.imagesPath}\n                                        dateAdded={this.props.data.dateAdded}\n                                        likeCounter={this.props.data.likesCounter}\n                                        dislikeCounter={this.props.data.dislikesCounter}\n                                        loggedInUserRating={this.props.data.loggedInUserRating}\n                                        emotionId={this.props.data.emotionId}\n                                        shouldDisplayLikeDislike={this.props.shouldDisplayLikeDislike}\n                                        messages={this.state.messages}\n                />\n            );\n        },\n        renderReportAction: function(shouldDisplayReportAction){\n            var reportBtn = <span></span>;\n            if(shouldDisplayReportAction)\n                reportBtn = <span className=\"reportAction\" onClick={this.openReportModal}>{this.state.messages.reportLabel}</span>\n            return(reportBtn);\n        },\n        openReportModal: function() {\n            $(\"body\").trigger(\"report-comment\",{\n                    comment: this.props.data,\n                    imagesPath: this.props.imagesPath,\n                    endDate: this.props.consultationEndDate\n                }\n            );\n        }\n    });\n\n    var CommentActionsEnabled = React.createClass({\n        getInitialState: function(){\n            return {\n                likeCounter: this.props.likeCounter,\n                dislikeCounter: this.props.dislikeCounter,\n                liked : this.props.comment.loggedInUserRating,  //if not null it means has liked/disliked this comment\n                source: this.props.source, //source =1 for democracIt, source = 2 for opengov\n                handleReply: this.props.handleReply,\n                finalLawBusy:true,\n                reportCommentBusy:true,\n                messages: this.props.messages\n            };\n        },\n        postRateCommentAndRefresh: function(){\n            var instance = this;\n            //todo: make ajax call and increment decremet the counters.\n            //todo: cancel any previous events\n            var annId='0';\n            if(instance.props.comment.discussionThread != undefined) {\n                annId = instance.props.comment.discussionThread.text.split('-')[1]\n            }\n            var data = {\n                comment_id : instance.props.id , liked : instance.state.liked,\n                commenterId:instance.props.comment.userId,\n                annId: annId,\n                articleId:instance.props.comment.articleId,\n                consultationId:instance.props.consultationId\n            };\n           $.ajax({\n\n                method: \"POST\",\n                url: \"/comments/rate\",\n\n                data: data,\n                beforeSend:function(){\n                },\n                success : function(response){\n                    return 1;\n                },\n                complete: function(){\n                    if(instance.props.userDefined)\n                        instance.setState(instance.state);\n                },\n                error:function(err){ console.log(err)}\n            });\n\n\n        },\n        handleLikeComment :function(){ //user pressed the liked button\n            //console.log(this.props);\n            var oldLikeStatus =this.state.liked;\n            var newLikeStatus=true;\n\n            if (oldLikeStatus ===true && this.props.userDefined) { //if comment was already liked, undo it\n                newLikeStatus=null;\n                this.state.likeCounter = this.state.likeCounter -1;\n            }\n            if (oldLikeStatus ===false && this.props.userDefined) //comment was disliked and now it was liked, remove it from counter\n                this.state.dislikeCounter= this.state.dislikeCounter-1;\n\n            if (newLikeStatus===true && this.props.userDefined)\n                this.state.likeCounter = this.state.likeCounter + 1;\n\n            this.state.liked= newLikeStatus;\n            this.postRateCommentAndRefresh();\n        },\n        handleDislikeComment:function(){ //user pressed the dislike button\n            var oldLikeStatus =this.state.liked;\n            var newLikeStatus=false;\n            if (oldLikeStatus ===false && this.props.userDefined) { //if comment was already disliked, undo it\n                newLikeStatus=null;\n                this.state.dislikeCounter = this.state.dislikeCounter  -1;\n            }\n            if (oldLikeStatus ===true && this.props.userDefined) //comment was liked and now it was disliked, remove it from counter\n                this.state.likeCounter= this.state.likeCounter-1;\n\n            if (newLikeStatus===false && this.props.userDefined)\n                this.state.dislikeCounter = this.state.dislikeCounter + 1\n\n            this.state.liked= newLikeStatus;\n            this.postRateCommentAndRefresh();\n        },\n        handleCommentInFinalLaw:function(){\n\n            $(\"body\").trigger(\"match-comment-with-law\",{  finalLawBusy: this.state.finalLawBusy,\n                                                        finalLawDiv: this.state.finalLawDiv,\n                                                        comment: this.props.comment,\n                                                        imagesPath: this.props.imagesPath,\n                                                        endDate: this.props.consultationEndDate\n                                                       }\n                            );\n        },\n        render: function() {\n\n            var instance = this;\n            var replyClasses = classNames(\"reply\",{hide: this.state.source ==2})//,{hide: this.props.data.source.commentSource ==2}); //hide for opengov\n            var agreeClasses = classNames(\"agree\", {active: this.state.liked===true});\n            var disagreeClasses = classNames(\"disagree\", {active: this.state.liked ===false});\n            var date =moment(this.props.dateAdded).format('llll');\n            if(this.props.shouldDisplayReplyBox)\n                var replyLink = <a className={replyClasses} onClick={this.state.handleReply}>{this.state.messages.reply} <i className=\"fa fa-reply\"></i></a>\n            if(this.props.shouldDisplayFinalLawAnnBtn)\n                var commentFinalLawAnnBtn = <a onClick={this.handleCommentInFinalLaw} className=\"commentInFinalLaw\" type=\"button\">{this.state.messages.commentFLMatching}</a>\n            return (\n                <div>\n                    <div className=\"optionsContainer\">\n                        <div className=\"options\">\n                            <a className={agreeClasses} onClick={this.handleLikeComment}>\n                                {this.state.messages.like}<i className=\"fa fa-thumbs-o-up\"></i>\n\n                            </a><span className=\"c\"> ({this.state.likeCounter})</span>\n                            <a className={disagreeClasses} onClick={this.handleDislikeComment}>\n                                {this.state.messages.dislike}<i className=\"fa fa-thumbs-o-down\"></i>\n                            </a> <span className=\"c\"> ({this.state.dislikeCounter})</span>\n                            {replyLink}\n                            {commentFinalLawAnnBtn}\n                            <span className=\"date\">{date}</span>\n                            </div>\n                    </div>\n                </div>\n            );\n        }\n    });\n    var CommentActionsDisabled = React.createClass({\n        getInitialState: function(){\n            return {\n                likeCounter: this.props.likeCounter,\n                dislikeCounter: this.props.dislikeCounter,\n                messages: this.props.messages\n            };\n        },\n        render: function() {\n            var agreeClasses = classNames(\"agree\", {active: this.state.liked===true});\n            var disagreeClasses = classNames(\"disagree\", {active: this.state.liked ===false});\n            var date =moment(this.props.dateAdded).format('llll');\n            if(this.props.shouldDisplayLikeDislike) {\n                var likeDislikeInfo = <div>\n                    <div className={agreeClasses}>{this.state.messages.likeUsers}<i className=\"fa fa-thumbs-o-up\"></i></div>\n                    <span className=\"c\"> ({this.state.likeCounter})</span>\n                    <div className={disagreeClasses}> {this.state.messages.dislikeUsers}<i className=\"fa fa-thumbs-o-down\"></i></div>\n                    <span className=\"c\"> ({this.state.dislikeCounter})</span>\n                </div>;\n            }\n            return (\n                <div className=\"optionsContainerDisabled\">\n                    <div className=\"options\">\n                        {likeDislikeInfo}\n\n                        <span className=\"date\">{date}</span>\n                    </div>\n                </div>\n            );\n        }\n    });\n\n\n})()\n\n\n"]}