{"version":3,"sources":["consultation-search.jsx"],"names":[],"mappings":"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","file":"consultation-search-compiled.js","sourcesContent":["scify.SearchContainer = React.createClass({\n    getInitialState: function(){\n        return { isBusy:false , consultations:[] , searchQuery :\"\"};\n    },\n    handleReset : function(){\n        $(\"#consultations\").stop().fadeIn();\n    },\n    abortAnyPendingAjaxRequest : function(){\n        if (this.searchRequest) //abort any pending requests\n            this.searchRequest.abort();\n    },\n    loadConsultations: function(query, serializedData) {\n\n        var instance = this;\n        instance.state.searchQuery = query;\n        instance.abortAnyPendingAjaxRequest();\n\n        if (query.length==0)\n        {\n            instance.handleReset();\n            instance.setState(instance.state);\n        }\n        else if (query.length>2)\n        {\n            instance.searchRequest=  $.ajax({\n                method: \"GET\",\n                url: instance.props.url,\n                data:  serializedData+\"&datatype=json\",\n                dataType: \"json\", //expected data type returned from the server\n                beforeSend: function(){\n                    instance.state.isBusy = true;\n                    instance.state.consultations =[];\n                    instance.setState(instance.state);\n                },\n                success: function (results) {\n                    instance.state.consultations =results;\n                },\n                complete : function(){\n\n                    instance.state.isBusy=false;\n                    instance.replaceState(instance.state);\n                    $(\"#consultations\").stop().hide();\n                }\n            });\n        }\n\n    },\n    render : function(){\n        return (\n            <div>\n                <SearchBox onChange={this.loadConsultations} />\n                <scify.ReactLoader  display={this.state.isBusy} />\n                <SearchResultsList isSearching={this.state.isBusy}\n                                   searchQuery={this.state.searchQuery}\n                                   handeReset={this.handleReset}\n                                   data={this.state.consultations} />\n            </div>\n        )\n    }\n});\nvar SearchBox = React.createClass({\n    handleKeyUp: function(){\n        var query = this.refs.searchInput.getDOMNode().value;\n        this.props.onChange(query, $(this.refs.form.getDOMNode()).serialize());\n    },\n    render : function(){\n        return (\n            <div id=\"search-box\">\n                <div className=\"wrapper\">\n                    <form ref=\"form\" className=\"form-inline\" >\n                        <div className=\"form-group\">\n                            <div className=\"box\">\n                                <span className=\"icon\"><i className=\"fa fa-search\"></i></span>\n                                <input ref=\"searchInput\" type=\"search\" id=\"search\" name=\"query\" placeholder=\"αναζητήστε στον τίτλο, πχ 'συντάξεις'\" onKeyUp={this.handleKeyUp} />\n                            </div>\n                        </div>\n                    </form>\n                    <a href=\"/consultation/display-all\">κλικ εδώ για να δείτε όλες τις διαβουλεύσεις</a>\n                </div>\n            </div>\n        )\n    }\n});\nvar SearchResultsList = React.createClass({\n    render: function(){\n        var resultNodes = this.props.data.map(function (result) {\n            return (\n                <ConsultationResult key={result.id}  data={result} />\n            );\n        });\n\n        if (this.props.isSearching) {\n            return (\n                <div></div>\n            );\n        }\n        else if ( this.props.data.length>0) {\n            return (\n                <div className=\"consultation-list container\">\n                    <h2>Βρέθηκαν {this.props.data.length} διαβουλεύσεις</h2>\n                    <div className=\"results\">\n                        {resultNodes}\n                    </div>\n                </div>\n            );\n        }\n        else if (this.props.data.length == 0 && this.props.searchQuery.length>0 ) {\n            return (\n                <div className=\"consultation-list container\">\n                    <h2>Δε βρέθηκαν αποτελέσματα για '<span dangerouslySetInnerHTML={{__html:this.props.searchQuery}} ></span>' </h2>\n                </div>\n            );\n        }\n        else {\n            return (<div></div>);\n        }\n\n    }\n});\nvar ConsultationResult= React.createClass({\n    render: function(){\n        var cons = this.props.data;\n        var expiredLabel = this.props.data.isActive ? \"λήξη:\" : \"έληξε:\";\n        var href = \"/consultation/\" + cons.id;\n        return (\n            <div className=\"consultation\">\n                <a href={href} dangerouslySetInnerHTML={{__html: cons.title}}></a><br/>\n                <span className=\"duration\">{expiredLabel} {cons.endDateFormatted} | διάρκεια {cons.totalDurationFormatted}</span>\n            </div>\n        );\n    }\n });"]}