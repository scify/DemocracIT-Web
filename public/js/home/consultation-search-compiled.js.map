{"version":3,"sources":["consultation-search.jsx"],"names":[],"mappings":"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","file":"consultation-search-compiled.js","sourcesContent":["scify.SearchContainer = React.createClass({\r\n    getInitialState: function(){\r\n        return { isBusy:false , consultations:[] , searchQuery :\"\"};\r\n    },\r\n    handleReset : function(){\r\n        $(\"#consultations\").stop().fadeIn();\r\n    },\r\n    abortAnyPendingAjaxRequest : function(){\r\n        if (this.searchRequest) //abort any pending requests\r\n            this.searchRequest.abort();\r\n    },\r\n    loadConsultations: function(query, serializedData) {\r\n\r\n        var instance = this;\r\n        instance.state.searchQuery = query;\r\n        instance.abortAnyPendingAjaxRequest();\r\n\r\n        if (query.length==0)\r\n        {\r\n            instance.handleReset();\r\n            instance.setState(instance.state);\r\n        }\r\n        else if (query.length>2)\r\n        {\r\n            instance.searchRequest=  $.ajax({\r\n                method: \"GET\",\r\n                url: instance.props.url,\r\n                data:  serializedData+\"&datatype=json\",\r\n                dataType: \"json\", //expected data type returned from the server\r\n                beforeSend: function(){\r\n                    instance.state.isBusy = true;\r\n                    instance.state.consultations =[];\r\n                    instance.setState(instance.state);\r\n                },\r\n                success: function (results) {\r\n                    instance.state.consultations =results;\r\n                },\r\n                complete : function(){\r\n\r\n                    instance.state.isBusy=false;\r\n                    instance.replaceState(instance.state);\r\n                    $(\"#consultations\").stop().hide();\r\n                }\r\n            });\r\n        }\r\n\r\n    },\r\n    render : function(){\r\n        return (\r\n            <div>\r\n                <SearchBox onChange={this.loadConsultations} />\r\n                <scify.ReactLoader  display={this.state.isBusy} />\r\n                <SearchResultsList isSearching={this.state.isBusy}\r\n                                   searchQuery={this.state.searchQuery}\r\n                                   handeReset={this.handleReset}\r\n                                   data={this.state.consultations} />\r\n            </div>\r\n        )\r\n    }\r\n});\r\nvar SearchBox = React.createClass({\r\n    handleKeyUp: function(){\r\n        var query = this.refs.searchInput.getDOMNode().value;\r\n        this.props.onChange(query, $(this.refs.form.getDOMNode()).serialize());\r\n    },\r\n    render : function(){\r\n        return (\r\n            <div id=\"search-box\">\r\n                <div className=\"wrapper\">\r\n                    <form ref=\"form\" className=\"form-inline\" >\r\n                        <div className=\"form-group\">\r\n                            <div className=\"box\">\r\n                                <span className=\"icon\"><i className=\"fa fa-search\"></i></span>\r\n                                <input ref=\"searchInput\" type=\"search\" id=\"search\" name=\"query\" placeholder=\"αναζητήστε στο τίτλο, πχ 'συντάξεις'\" onKeyUp={this.handleKeyUp} />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                    <a href=\"/consultation/display-all\">κλικ εδώ για να δείτε όλες τις διαβουλεύσεις</a>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n});\r\nvar SearchResultsList = React.createClass({\r\n    render: function(){\r\n        var resultNodes = this.props.data.map(function (result) {\r\n            return (\r\n                <ConsultationResult key={result.id}  data={result} />\r\n            );\r\n        });\r\n\r\n        if (this.props.isSearching) {\r\n            return (\r\n                <div></div>\r\n            );\r\n        }\r\n        else if ( this.props.data.length>0) {\r\n            return (\r\n                <div className=\"consultation-list container\">\r\n                    <h2>Βρέθηκαν {this.props.data.length} διαβουλεύσεις</h2>\r\n                    <div className=\"results\">\r\n                        {resultNodes}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        else if (this.props.data.length == 0 && this.props.searchQuery.length>0 ) {\r\n            return (\r\n                <div className=\"consultation-list container\">\r\n                    <h2>Δε βρέθηκαν αποτελέσματα για '<span dangerouslySetInnerHTML={{__html:this.props.searchQuery}} ></span>' </h2>\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return (<div></div>);\r\n        }\r\n\r\n    }\r\n});\r\nvar ConsultationResult= React.createClass({\r\n    render: function(){\r\n        var cons = this.props.data;\r\n        var expiredLabel = this.props.data.isActive ? \"λήξη:\" : \"έληξε:\";\r\n        var href = \"/consultation/\" + cons.id;\r\n        return (\r\n            <div className=\"consultation\">\r\n                <a href={href} dangerouslySetInnerHTML={{__html: cons.title}}></a><br/>\r\n                <span className=\"duration\">{expiredLabel} {cons.endDateFormatted} | διάρκεια {cons.totalDurationFormatted}</span>\r\n            </div>\r\n        );\r\n    }\r\n });"]}