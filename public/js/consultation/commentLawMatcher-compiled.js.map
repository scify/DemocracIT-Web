{"version":3,"sources":["commentLawMatcher.jsx"],"names":[],"mappings":"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","file":"commentLawMatcher-compiled.js","sourcesContent":["(function(){\n\n    window.scify.commentLawMatcher = React.createClass({\n        getInitialState: function() {\n            return {\n                comment : this.props.comment,\n                display :\"\",\n                finalLawId: this.props.finalLawId,\n                annotators: []\n            };\n        },\n        componentDidMount: function() {\n            this.updateFinalLawDivDataTarget();\n            this.createAnnotationAreasForFinalLaw();\n            this.formSubmitHandler();\n        },\n        //TODO: implement clearForm function to clear all selected checkboxes\n\n        formSubmitHandler: function() {\n            var instance = this;\n            $('#saveFinalLawAnnotation').on(\"click\",function(e) {\n\n                e.preventDefault();\n                var inputs = $(\"#FinalLawAnnForm :input\");\n                var values = [];\n                var index = 0;\n                $(inputs).each(function() {\n                    if(this.type == \"checkbox\") {\n                        if($(this).is(':checked')) {\n                            var dataId = $(this).parent().parent().attr(\"data-id\");\n                            values[index] = dataId;\n                            index++;\n                        }\n                    }\n                });\n                var dataToSend = {\n                    annotationIds: values,\n                    finalLawId:instance.state.finalLawId,\n                    commentId:instance.state.comment.id\n                };\n                console.log(dataToSend);\n                instance.sendDataToController(dataToSend);\n            });\n        },\n        sendDataToController: function(data) {\n\n            $.ajax({\n                method: \"POST\",\n                url: \"/finallaw/annotate\",\n                data: JSON.stringify(data),\n                dataType: \"json\",\n                contentType: \"application/json; charset=utf-8\",\n                beforeSend:function(){\n                    //TODO: set busy to display loader\n                },\n                success : function(data){\n                    console.log(data);\n\n                },\n                complete: function(){\n                    //TODO: set not busy or display a message?\n                }\n            });\n        },\n        fetchAnnotationData: function() {\n            var instance = this;\n            var dataToSend = {\n                commentId: this.state.comment.id,\n                finalLawId: this.state.finalLawId\n            };\n            $.ajax({\n                method: \"GET\",\n                url: \"/finallaw/annotations/get\",\n                data: dataToSend,\n                dataType: \"json\",\n                contentType: \"application/json; charset=utf-8\",\n                beforeSend:function(){\n                    //TODO: set busy to display loader\n                },\n                success : function(data){\n                    console.log(data);\n                    instance.state.annotators = data;\n                    instance.setState(instance.state);\n                },\n                complete: function(){\n                    //TODO: set not busy or display a message?\n                }\n            });\n        },\n        display: function(data){\n            this.state.comment = data.comment;\n            this.state.display = \"in show\";\n            this.setState(this.state);\n            this.fetchAnnotationData();\n        },\n        updateFinalLawDivDataTarget: function() {\n            //we want to change the data-target value of the final law div to be unique\n            $(\"#commentLawMatcher a[data-target^='#finalLawUploadedBody']\").each(function(index){\n                $(this).attr(\"data-target\", \"#finalLawAnnBody-\" + $(this).attr(\"data-target\").split(\"-\")[1]);\n                $(this).parent().next().attr(\"id\", \"finalLawAnnBody-\" + $(this).attr(\"data-target\").split(\"-\")[1]);\n            });\n        },\n        createAnnotationAreasForFinalLaw: function() {\n            var finalLawAnn = new scify.Annotator(\"#commentLawMatcher .article-body, #commentLawMatcher .article-title-text\", \"fl-ann\");\n            finalLawAnn.init();\n            $(\"#commentLawMatcher .fl-ann\").append(\"<span class='fl-ann-icon' title='κλικ εδώ για δήλωση κειμένου που συμπεριελήφθη το σχόλιο'><input type='checkbox'></span>\");\n\n        },\n        closeModal:function(){\n            this.state.display = \"\";\n            this.setState(this.state);\n        },\n        render: function() {\n            var annotatorBox = <div></div>;\n            if(this.state.annotators.length > 0) {\n                annotatorBox = <AnnotationButtons annotators={this.state.annotators} commentId={this.state.comment.id}/>\n            }\n            var innerContent =  <scify.ReactLoader display={this.props.busy} />;\n\n            if(!this.props.busy) {\n                innerContent =\n                    <div className=\"finalLawAnnModalContent\">\n                        <div id=\"finalLawAnnDiv\" dangerouslySetInnerHTML={{__html:this.props.finalLawDiv}}></div>\n                        <div className=\"annFinalLawComment\">\n                            <div className='body commentBox'>\n                                <scify.Comment\n                                    imagesPath = {this.props.imagesPath}\n                                    key={this.props.comment.id}\n                                    data={this.props.comment}\n                                    shouldDisplayCommenterName={true}\n                                    shouldDisplayEditIcon={false}\n                                    shouldDisplayCommentEdited={true}\n                                    shouldDisplayShareBtn={false}\n                                    shouldDisplayCommentBody={true}\n                                    shouldDisplayEmotion={true}\n                                    shouldDisplayAnnotatedText={true}\n                                    shouldDisplayReplyBox={false}\n                                    shouldDisplayReplies={false}\n                                    optionsEnabled={false}\n                                    shouldDisplayTopics={true}\n                                    commentClassNames=\"comment\"\n                                    shouldDisplayFinalLawAnnBtn={false}/>\n                                <div className=\"annotatorBox\">\n                                    {annotatorBox}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n            }\n            return (\n                <form id=\"FinalLawAnnForm\">\n                    <div id=\"finalLawCommentModal\" className={ classNames(\"modal\",\"fade\",\"consFinalLawModal\",this.state.display)} role=\"dialog\">\n                        <div className={ classNames(\"modal-backdrop\",\"fade\",this.state.display)} style={{height: 966 +\"px\"}}></div>\n                        <div className=\"modal-dialog \">\n                            <div className=\"modal-content\">\n                                <div className=\"modal-header\">\n                                    <h4 className=\"modal-title\">Αντιστοίχηση σχολίου με τον τελικό νόμο <i className=\"fa fa-question-circle\" title=\"Επεξήγηση\"></i></h4>\n                                    <button type=\"button\" className=\"close\" onClick={this.closeModal}>&times;</button>\n                                </div>\n                                <div className=\"modal-body\">\n                                    {{ innerContent }}\n                                </div>\n                                <div className=\"saveBtnContainer\">\n                                    <button id=\"saveFinalLawAnnotation\" className=\"btn blue\">Καταχώρηση</button>\n                                </div>\n                                <div className=\"modal-footer\">\n                                    <button type=\"button\" className=\"btn btn-default\" onClick={this.closeModal}>Κλείσιμο</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            );\n        }\n    });\n\n    var AnnotationButtons = React.createClass({\n        getInitialState: function() {\n            return {\n                annotators: this.props.annotators,\n                commentId: this.props.commentId\n            };\n        },\n        renderAnnotatorBtns: function() {\n            console.log(this.state.annotators);\n            var annotatorBtns = this.state.annotators.map(function (annotatorObj){\n                return(\n                    <button id=\"saveFinalLawAnnotation\" className=\"btn blue\">{annotatorObj.userName}</button>\n                );\n            });\n            var annotatorBtnContainer = this.state.annotators.length > 0 ?\n                <div id={\"annotatorBtnContainer_\" + this.state.commentId} className=\"annotatorBtnContainer\">\n                    {annotatorBtns}\n                </div>:\"\";\n            return (annotatorBtnContainer);\n\n        },\n        render: function() {\n\n            return(\n                <div>\n                    {this.renderAnnotatorBtns()}\n                </div>\n            );\n        }\n    });\n\n})()"]}