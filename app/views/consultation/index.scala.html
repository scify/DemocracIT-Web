@import model.viewmodels.ConsultationViewModel
@(model: ConsultationViewModel)

@js = {
    @*<script src="http://rangy.googlecode.com/svn/trunk/currentrelease/rangy-core.js" ></script>*@
      <script src="//tinymce.cachefly.net/4.1/tinymce.min.js"></script>
    <script src="@routes.Assets.at("js/react-with-addons.js")"></script>
    <script src="http://momentjs.com/downloads/moment-with-locales.min.js"></script>
    <script src="@routes.Assets.at("js/classnames.js")" ></script>
    <script src="@routes.Assets.at("js/consultation/commentBox-compiled.js")" ></script>
    <script  src="@routes.Assets.at("js/consultation/index.js")" ></script>
    <script>
     $(function(){
        var controller = new scify.ConsultationIndexPageHandler(@Html(model.annotationTypesToJson()));
        controller.init();
        })
    </script>
}

@css = {
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/consultation/consultation.css")">
    <link rel="stylesheet" href="http://css-spinners.com/css/spinner/spinner.css" type="text/css">
}

@layout("DemocracIT", css, js,None) {

    <section id="stats" class="container">
        Διάρκεια @model.consultation.totalDurationFormatted | @model.consultation.startDate έως @model.consultation.endDate | <a href="@model.consultation.opengov_url" target="_blank">open gov link</a>
            @if(model.consultation.isActive) {
                <div class="consState activeCons">Ενεργή Διαβούλευση</div>
            } else {
                <div class="consState inactiveCons">Αυτή η διαβούλευση δεν είναι πλέον ενεργή.</div>
            }
    </section>

    <div id="wrapper" class="container">
        <section id="consultation-header">
        <div class="row">
            <div class="col-md-12 title" >
                @Html(model.consultation.title)
            </div>
        </div>
            </section>
        <section id="consultation-body">
            @for(article <- model.consultation.articles) {
                <div data-id="@article.id"  class="row article ">
                    <div class="col-md-11">
                        <div class="title">
                          <a class="show-hide btn collapsed" data-toggle="collapse" data-target="#body-@article.id"><span>-</span><span>+</span></a>
                          <span class="article-title-text">@article.title</span>
                            <div class="open-gov-commentbox-wrap"></div>
                        </div>
                        <div class="article-body collapse" id="body-@article.id" style="height:0;" >
                            @Html(article.body)
                        </div>

                    </div>
                    <div data-total="" class="comment-wrp skip-ann col-md-1">
                        <a class="open-gov-comments" href="@routes.ConsultationController.getOpenGovComments(model.consultation.id,article.id,None,None)">@article.commentsNum σχολια</a>
                        </div>
                </div>
            }
        </section>
        <div id="comment-box-wrp"></div>
    </div>
    <div id="toolbar">

        <form action="@routes.AnnotationController.annotatePost()" method="post">

            <div>
                Επισημείωση για το τμήμα κειμένου:
                <blockquote></blockquote></div>
            <div>
                <hr>
                <select name="tagId">
                    <option>Υπόδειξη προβλήματος:</option>
                @for(annotation <- model.allowedAnnotations){
                    <option value="@annotation.id">@annotation.description </option>
                }
                </select>
            </div>


            <div id="comment-wrap">
                Θα ηθελα να δηλωσω οτι:
                <textarea name="comment">

                </textarea>
            </div>

            <input type="hidden" name="consultationId" value="@model.consultation.id"/>
            <input type="hidden" name="articleId" value=""/>
            <input type="hidden" name="startIndex" value=""/>
            <input type="hidden" name="endIndex" value=""/>
            <input type="hidden" name="text" value=""/>

            <button class="btn blue" type="submit">Καταχώρηση</button>
            <button class="close btn red" type="button" class="btn red" >Κλείσιμο</button>
        </form>
    </div>


}




