{"version":3,"sources":["consultationForChart.jsx"],"names":[],"mappings":"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","file":"consultationForChart-compiled.js","sourcesContent":["(function(){\n\n    scify.consultationForChart = React.createClass({\n        getInitialState: function() {\n            return {\n                consultations: [],\n                displayedConsultations:[],\n                busy: false,\n                display: false,\n                page:10,\n                shouldDisplayLoadMoreBtn: true,\n                messages: this.props.evaluationMessages\n            };\n        },\n        displayNextBatch: function(event){\n            //event.preventDefault();\n            var loaded = this.state.displayedConsultations.length;\n            var nextBatchMargin = this.state.page;\n            var toLoad = loaded + nextBatchMargin;\n            if(toLoad > this.state.consultations.length) {\n                toLoad = this.state.consultations.length;\n                this.state.shouldDisplayLoadMoreBtn = false;\n            }\n            this.state.displayedConsultations = this.state.consultations.slice(0, toLoad);\n            this.setState(this.state);\n        },\n        getConsultationsFromServer : function(cons_ids){\n            //console.log(cons_ids)\n            this.state.consultations = [];\n            var instance = this;\n            var promise = $.ajax({\n                method: \"POST\",\n                url: \"/evaluator/consultations/get\",\n                data: {cons_ids:cons_ids},\n                beforeSend: function(){\n                    instance.state.consultations = [];\n                    instance.state.displayedConsultations= [];\n                    instance.state.busy=true;\n                    instance.state.display = true;\n                    instance.setState(instance.state);\n                },\n                success : function(data){\n                    //console.log(data);\n                    instance.state.consultations = data;\n                },\n                complete: function(){\n                    instance.state.busy=false;\n                    instance.state.display = true;\n                    instance.displayNextBatch.call(instance);\n                },\n                error: function(x,z,y){\n                    console.log(x);\n                }\n            });\n            return promise;\n        },\n        render: function() {\n            var instance = this;\n            if(this.state.display) {\n                if (this.state.busy) {\n                    return (\n                        <div>\n                            <scify.ReactLoader display={this.state.busy}/>\n                        </div>\n                    );\n                } else {\n                    var divToDisplay = [];\n                    console.log(instance.state.displayedConsultations.length);\n                    instance.state.displayedConsultations.forEach(function(consultation) {\n                        //console.log(consultation);\n                        divToDisplay.push(<div className=\"consItem comment\"><div className=\"consTitle\"><a href={\"/consultation/\" + consultation.id}>{consultation.title}</a></div>\n                            <div>{instance.state.messages.dateWhenConsWasActive}:\n                                <span className=\"consDate\">{new Date(consultation.start_date).toLocaleDateString('el-EL', {hour: '2-digit'})}\n                                </span> {instance.state.messages.consTo} <span className=\"consDate\">{new Date(consultation.end_date).toLocaleDateString('el-EL', {hour: '2-digit'})}</span></div>\n                        </div>);\n                    });\n                    var loadMoreBtnClasses = classNames(\"loadMoreBtn\",{ hide :!instance.state.shouldDisplayLoadMoreBtn});\n                    return (\n                        <div className=\"commentList\">{divToDisplay}\n                        <div className={loadMoreBtnClasses} onClick={this.displayNextBatch}>load more <div className=\"loadMoreIcon\"><i className=\"fa fa-sort-desc\"></i></div></div>\n                        </div>\n\n                    );\n                }\n            } else {\n                return (\n                    <div></div>\n                );\n            }\n        }\n    });\n\n})()"]}