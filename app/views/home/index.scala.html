@(viewmodel:model.viewmodels.HomeViewModel)
@js ={
}
@css = {
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/home/index.css")">
}

@layout("Αρχική",css,js, viewmodel.user){

    <div id="platform-stats">
        <div class="container">
        <div class="stat">
            <div class="row">
                <div class="total col-md-4">
                    <div class="wrp" data-target="#organizations" data-toggle="collapse">
                    @viewmodel.stats.totalConsultations
                    <br>
                    διαβουλεύσεις
                    </div>
                </div>
                <div class="total col-md-4">
                    <div class="wrp">
                        Μέσος αριθμός σχολίων/διαβούλευση
                        <br>
                            1000
                    </div>
                </div>
                <div class=" total col-md-4">
                    <div class="wrp">
                        Μέση διάρκεια διαβούλευσης
                        <br>
                        30 ημέρες
                    </div>
                </div>
            </div>

            <div id="organizations" class="row collapse">
                @for(orgs <- viewmodel.stats.organizationsPerCategory) {
                    <div class="organization-group col-md-4">
                        <label>@orgs.category</label>
                        <hr/>
                        <ul>
                            @for(stat <- orgs.stats) {
                                <li><a href="@routes.ConsultationController.search()?ministryId=@stat.id">@stat.title (@stat.consultationCount)</a></li>
                            }
                        </ul>
                     </div>
                }
            </div>
        </div>
            </div>
    </div>

    @common.searchbox()

    <div id="consultations">
        <div class="container">
            <div id="in-progress">
                <h2>Σε εξέλιξη:</h2>
                @displayConsultation(viewmodel.activeConsultations, "λήξη")
            </div>
            <hr/>
            <div id="recent">
            <h2>Πρόσφατες:</h2>
                @displayConsultation(viewmodel.recentConsultations, "έληξε")
        </div>
        </div>
    </div>
}

@displayUser(user: model.User) = {
    <div class="user col-md-6 col-md-offset-3">
        <div class="row">
            <hr class="col-md-12" />
            <h4 class="col-md-8">Welcome, you are now signed in!</h4>
            <div class="col-md-4 text-right">
                <img src="@user.avatarURL.getOrElse(routes.Assets.at("images/silhouette.png"))" style="height:40px;" />
            </div>
            <hr class="col-md-12" />
        </div>
        <div class="row data">
            <div class="col-md-12">
                <div class="row">
                    <p class="col-md-6"><strong>First name:</strong></p><p class="col-md-6">@user.firstName.getOrElse("None")</p>
                </div>
                <div class="row">
                    <p class="col-md-6"><strong>Last name:</strong></p><p class="col-md-6">@user.lastName.getOrElse("None")</p>
                </div>
                <div class="row">
                    <p class="col-md-6"><strong>Full name:</strong></p><p class="col-md-6">@user.fullName.getOrElse("None")</p>
                </div>
                <div class="row">
                    <p class="col-md-6"><strong>Email:</strong></p><p class="col-md-6">@user.email.getOrElse("None")</p>
                </div>
            </div>
        </div>
    </div>
}

@displayConsultation(consultations:List[model.dtos.Consultation], label:String)= {

        @if(consultations.length==0){
            <div class="empty">
                Δεν υπάρχει ανοικτή διαβούλευση αυτή τη στιγμή
            </div>
        }

        @for(cons <- consultations) {
            <div class="consultation">
                <a href="@routes.ConsultationController.getConsultation(cons.id)">@cons.title</a>
                <br> <i>@label: @cons.endDateFormatted</i>
            </div>
        }
}

