{"version":3,"sources":["wordCloud.jsx"],"names":[],"mappings":"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","file":"wordCloud-compiled.js","sourcesContent":["(function(){\n\n    scify.WordCloud = React.createClass({\n        getInitialState: function() {\n          return {\n              consultationid: this.props.consultationid,\n              frequency_list: [],\n              busy: false,\n              display: false\n          };\n        },\n        refreshComments : function(){\n            var instance = this;\n            if (instance.state.commentsCount > instance.state.comments.length )\n                instance.getCommentsFromServer.call(instance);\n            else if (instance.state.display)\n                instance.setVisibibility.call(instance,false);\n            else\n                instance.setVisibibility.call(instance,true);\n        },\n        getWordCloudFromServer : function(consultationId){\n            var instance = this;\n            var promise = $.ajax({\n                method: \"GET\",\n                url: \"http://localhost:28084/WordCloud/WordCloud\",\n                cache:false,\n                data:{\n                    consultation_id :3957\n                },\n                beforeSend: function(){\n                    instance.state.busy=true;\n                    instance.state.display = true;\n                    instance.setState(instance.state);\n                },\n                success : function(data){\n                    var arr = $.map(data, function(el) {\n                        var results = [];\n                        for(var item in el) {\n                            //console.log(el[item]);\n                            results.push({\"text\":el[item].term, \"size\":Math.floor(el[item].freq)})\n                        }\n                        return results;\n                    });\n                    console.log(arr);\n                    instance.state.frequency_list = arr;\n                },\n                complete: function(){\n                    instance.state.busy=false;\n                    instance.state.display = true;\n                    instance.setState(instance.state);\n                },\n                error: function(x,z,y){\n                    console.log(x);\n                }\n            });\n\n            return promise;\n        },\n        drawD3 : function() {\n            var color = d3.scale.linear()\n                .domain([0, 1, 2, 3, 4, 5, 6, 10, 15, 20, 100])\n                .range([\"#ddd\", \"#ccc\", \"#bbb\", \"#aaa\", \"#999\", \"#888\", \"#777\", \"#666\", \"#555\", \"#444\", \"#333\", \"#222\"]);\n\n            var color = d3.scale.linear()\n                .domain([0, 1, 2, 3, 4, 5, 6, 10, 15, 20, 100])\n                .range([\"#ddd\", \"#ccc\", \"#bbb\", \"#aaa\", \"#999\", \"#888\", \"#777\", \"#666\", \"#555\", \"#444\", \"#333\", \"#222\"]);\n\n            d3.layout.cloud().size([800, 300])\n                .words(this.state.frequency_list)\n                .rotate(0)\n                .fontSize(function (d) {\n                    return d.size;\n                })\n                .on(\"end\", draw)\n                .start();\n\n            function draw(words) {\n                if(words.length > 0) {\n                    d3.select(\"#wordCloudChart\").append(\"svg\")\n                        .attr(\"width\", 850)\n                        .attr(\"height\", 350)\n                        .attr(\"class\", \"wordcloud\")\n                        .append(\"g\")\n                        // without the transform, words words would get cutoff to the left and top, they would\n                        // appear outside of the SVG area\n                        .attr(\"transform\", \"translate(320,200)\")\n                        .selectAll(\"text\")\n                        .data(words)\n                        .enter().append(\"text\")\n                        .style(\"font-size\", function (d) {\n                            return d.size + \"px\";\n                        })\n                        .style(\"fill\", function (d, i) {\n                            return color(i);\n                        })\n                        .attr(\"transform\", function (d) {\n                            return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\n                        })\n                        .text(function (d) {\n                            return d.text;\n                        });\n                }\n            }\n        },\n        render: function() {\n                if (this.props.busy) {\n                    return (\n                        <div>\n                            <scify.ReactLoader display={this.props.busy}/>\n                        </div>\n                    );\n                }\n                this.drawD3();\n                return (\n                    <div id=\"wordCloudChart\"></div>\n                );\n        }\n    });\n\n})()\n\n\n"]}