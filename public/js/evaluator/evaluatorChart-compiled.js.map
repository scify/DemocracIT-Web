{"version":3,"sources":["evaluatorChart.jsx"],"names":[],"mappings":";;AAAA,CAAC,YAAU;;AAEP,SAAK,CAAC,cAAc,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACrC,uBAAe,EAAE,2BAAW;AAC1B,mBAAO;AACH,8BAAc,EAAE,EAAE;AAClB,oBAAI,EAAE,KAAK;AACX,uBAAO,EAAE,KAAK;aACjB,CAAC;SACH;AACD,mCAA2B,EAAG,uCAAU;;AAEpC,gBAAI,QAAQ,GAAG,IAAI,CAAC;AACpB,gBAAI,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC;AACjB,sBAAM,EAAE,KAAK;AACb,mBAAG,EAAE,mCAAmC;AACxC,0BAAU,EAAE,sBAAU;AAClB,4BAAQ,CAAC,KAAK,CAAC,IAAI,GAAC,IAAI,CAAC;AACzB,4BAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;AAC9B,4BAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACrC;AACD,uBAAO,EAAG,iBAAS,IAAI,EAAC;;AAEpB,wBAAI,KAAK,GAAG,CAAC,CAAC;;AAEd,wBAAI,qBAAqB,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AAC7C,yBAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,qBAAqB,EAAE,CAAC,EAAE,EAAE;AAC3C,4BAAI,OAAO,GAAG,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,cAAc,CAAC;AACpD,4BAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,gBAAgB,CAAC;AAC9C,4BAAI,0BAA0B,GAAG,EAAE,CAAC;AACpC,4BAAI,eAAe,GAAG,CAAC,CAAC;;AAExB,6BAAI,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,KAAK,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AACpC,sDAA0B,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,8DAA0D,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,OAAO,GAAG,qBAAqB,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,qBAAqB,GAAG,aAAa,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;AAC3Q,gCAAG,IAAI,CAAC,CAAC,CAAC,CAAC,qBAAqB,IAAI,CAAC,EAAE;AACnC,+CAAe,GAAG,CAAC,CAAC;6BACvB;yBACJ;AACD,yBAAC,CAAE,uCAAuC,CAAE,CAAC,MAAM,CAAE,6CAA0C,GAAG,OAAO,GAAI,iBAAgB,CAAE,CAAC;;AAEhI,4BAAG,eAAe,EAAE;AAChB,6BAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,GAClB,8CAA4C,GAAG,UAAU,GAAG,QAAQ,GACpE,sHAAoH,CAAC,CAAC;yBACjI,MAAM;AACH,6BAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,GACtB,8CAA4C,GAAG,UAAU,GAAG,QAAQ,CAAC,CAAC;AAC1E,oCAAQ,CAAC,WAAW,CAAC,0BAA0B,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;yBAChF;AACD,6BAAK,IAAE,EAAE,CAAC;AACV,uCAAe,GAAG,CAAC,CAAC;qBACvB;iBACJ;AACD,wBAAQ,EAAE,oBAAU;AAChB,4BAAQ,CAAC,KAAK,CAAC,IAAI,GAAC,KAAK,CAAC;AAC1B,4BAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;AAC9B,4BAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;iBACrC;AACD,qBAAK,EAAE,eAAS,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC;AAClB,2BAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;iBAClB;aACJ,CAAC,CAAC;;AAEH,mBAAO,OAAO,CAAC;SAClB;AACD,mBAAW,EAAG,qBAAS,YAAY,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE;AAC7D,gBAAI,GAAG,GAAG,YAAY,CAAC,MAAM,CAAC,UAAS,GAAG,EAAE,GAAG,EAAE;AACzC,uBAAO,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aAChC,EAAE,CAAC,QAAQ,CAAC,CAAC;;AAElB,gBAAI,IAAI,GAAG,IAAI,MAAM,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;;AAEhD,gBAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AAC7B,gBAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AAC7B,gBAAI,CAAC,SAAS,CAAC,EAAC,IAAI,EAAC,QAAQ,EAAE,IAAI,EAAC,SAAS,EAAC,GAAG,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,EAAC,CAAC,CAAC;AACpE,gBAAI,CAAC,SAAS,CAAC,EAAC,IAAI,EAAC,QAAQ,EAAE,IAAI,EAAC,YAAY,EAAC,CAAC,CAAC;AACnD,gBAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AAC3B,gBAAI,WAAW,GAAG,GAAG,CAAC;AACtB,gBAAG,GAAG,GAAG,CAAC,EAAE;AACR,2BAAW,GAAG,GAAG,CAAC;aACrB,MAAM,IAAG,GAAG,GAAG,EAAE,EAAE;AAChB,2BAAW,GAAG,GAAG,CAAC;aACrB,MAAM,IAAG,GAAG,GAAG,EAAE,EAAE;AAChB,2BAAW,GAAG,GAAG,CAAC;aACrB,MAAM,IAAG,GAAG,GAAG,CAAC,EAAE;AACf,2BAAW,GAAG,GAAG,CAAC;aACrB;;AAED,gBAAI,OAAO,GAAG;AACV,uBAAO,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC;AACvB,oCAAoB,EAAE,IAAI;AAC1B,uBAAO,EAAE,kCAAgC,GAAG,UAAU,GAAG,QAAQ,EAAC,aAAa,EAAE,MAAM;AACvF,wBAAQ,EAAE,WAAW;AACrB,uBAAO,EAAC,MAAM;AACd,mBAAG,EAAE,EAAC,UAAU,EAAE,KAAK,EAAC;AACxB,2BAAW,EAAE,EAAC,KAAK,EAAE,KAAK,EAAC,QAAQ,EAAE,WAAW,GAAE,GAAG,EAAC,IAAI,EAAC,KAAK,EAAC;AACjE,uBAAO,EAAE;AACL,yBAAK,EAAE,OAAO;AACd,6BAAS,EAAE;AACP,gCAAQ,EAAE,EAAE;AACZ,6BAAK,EAAE,SAAS;AAChB,4BAAI,EAAE,KAAK;AACX,8BAAM,EAAE,KAAK;qBAChB;;iBAEJ;AACD,yBAAS,EAAC;AACN,4BAAQ,EAAE,IAAI;AACd,0BAAM,EAAE,KAAK;AACb,2BAAO,EAAE,IAAI;iBAChB;AACD,sBAAM,EAAC,IAAI;AACX,uBAAO,EAAE;AACL,yBAAK,EAAE,uBAAuB;AAC9B,8BAAU,EAAC;AACP,2BAAG,EAAC,GAAG;AACP,2BAAG,EAAC,CAAC;qBACR,EAAC,MAAM,EAAE,GAAG;AACb,6BAAS,EAAE;AACP,6BAAK,EAAE,GAAG,GAAG,CAAC;qBACjB;iBACJ;AACD,sBAAM,EAAE,EAAC,QAAQ,EAAE,MAAM,EAAC,SAAS,EAAC,OAAO,EAAC;AAC5C,0BAAU,EAAG,EAAE;aAClB,CAAC;;AAEF,gBAAI,KAAK,CAAC;AACV,oBAAO,SAAS;AACZ,qBAAK,KAAK;AACN,yBAAK,GAAG,IAAI,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;AAC/E,0BAAM;AAAA,AACV,qBAAK,KAAK;AACN,yBAAK,GAAG,IAAI,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;AAC5E,0BAAM;AAAA,AACV;AACI,0BAAK;AAAA,aACZ;AACD,iBAAK,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SACjC;AACD,cAAM,EAAE,kBAAW;AACf,gBAAG,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;AACnB,oBAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;AACjB,2BACI;;;wBACI,oBAAC,KAAK,CAAC,WAAW,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,AAAC,GAAE;qBAC5C,CACR;iBACL;aACJ;AACD,mBACI,gCAAW,CACb;SACL;KACJ,CAAC,CAAC;CAEN,CAAA,EAAG,CAAA","file":"evaluatorChart-compiled.js","sourcesContent":["(function(){\n\n    scify.evaluatorChart = React.createClass({\n        getInitialState: function() {\n          return {\n              frequency_list: [],\n              busy: false,\n              display: false\n          };\n        },\n        getFrequencyPerOrganization : function(){\n            //console.log(\"getFrequencyPerOrganization\");\n            var instance = this;\n            var promise = $.ajax({\n                method: \"GET\",\n                url: \"/evaluator/frequency/organization\",\n                beforeSend: function(){\n                    instance.state.busy=true;\n                    instance.state.display = true;\n                    instance.setState(instance.state);\n                },\n                success : function(data){\n                    //console.log(data);\n                    var index = 0;\n                    /*15 is the number of months we are querying for*/\n                    var numberOfOrganizations = data.length / 18;\n                    for(var i = 0; i < numberOfOrganizations; i++) {\n                        var chartId = \"chart_\" + data[index].organizationId;\n                        var chartTitle = data[index].organizationName;\n                        var dataForCurrentOrganization = [];\n                        var noConsultations = 1;\n                        //console.log(chartId);\n                        for(var j = index; j < index + 18; j++) {\n                            dataForCurrentOrganization.push([data[j].date, data[j].numberOfConsultations, '<div style=\"padding-left: 10px\"><h5 style=\"width:150px\">' + data[j].date + '</h5>' + '<h5>Διαβουλέυσεις: ' + data[j].numberOfConsultations + '</h5></div>', data[j].numberOfConsultations]);\n                            if(data[j].numberOfConsultations != 0) {\n                                noConsultations = 0;\n                            }\n                        }\n                        $( \"#consultationsPerOrganizationInnerDiv\" ).append( '<div class=\"organizationChart\"><div id=\"' + chartId  + '\"></div></div>' );\n                        //console.log(dataForCurrentOrganization);\n                        if(noConsultations) {\n                            $(\"#\" + chartId).append('' +\n                                    '<div class=\"explanation organizationName\">' + chartTitle + '</div>' +\n                                    '<div class=\"explanation\">Αυτός ο φορέας δεν έχει αναρτήσει δημόσιες διαβουλέυσεις τους τελευταίους 18 μήνες.</div>');\n                        } else {\n                            $(\"#\" + chartId).before('' +\n                                '<div class=\"explanation organizationName\">' + chartTitle + '</div>');\n                            instance.createChart(dataForCurrentOrganization, chartId, chartTitle, 'bar');\n                        }\n                        index+=18;\n                        noConsultations = 1;\n                    }\n                },\n                complete: function(){\n                    instance.state.busy=false;\n                    instance.state.display = true;\n                    instance.setState(instance.state);\n                },\n                error: function(x,z,y){\n                    console.log(x);\n                }\n            });\n\n            return promise;\n        },\n        createChart : function(dataForChart, chartId, chartTitle, chartType) {\n                var max = dataForChart.reduce(function(max, arr) {\n                        return Math.max(max, arr[1]);\n                    }, -Infinity);\n                //console.log(chartTitle + \": \" +max);\n                var data = new google.visualization.DataTable();\n                //console.log(dataForChart);\n                data.addColumn('string', \"\");\n                data.addColumn('number', \"\");\n                data.addColumn({type:'string', role:'tooltip','p': {'html': true}});\n                data.addColumn({type:'number', role:'annotation'});\n                data.addRows(dataForChart);\n                var chartHeight = 300;\n                if(max < 2) {\n                    chartHeight = 200;\n                } else if(max > 20) {\n                    chartHeight = 900;\n                } else if(max > 10) {\n                    chartHeight = 700;\n                } else if(max > 5) {\n                    chartHeight = 400;\n                }\n\n                var options = {\n                    tooltip: {isHtml: true},\n                    'displayAnnotations': true,\n                    'title': '<div class=\"organizationName\">' + chartTitle + '</div>',titlePosition: 'none',\n                    'height': chartHeight,\n                    'width':'1300',\n                    bar: {groupWidth: \"90%\"},\n                    'chartArea': {width: '75%','height': chartHeight -100,left:'200'},\n                    'hAxis': {\n                        title: \"Μήνες\",\n                        textStyle: {\n                            fontSize: 11,\n                            color: '#053061',\n                            bold: false,\n                            italic: false\n                        }\n\n                    },\n                    animation:{\n                        duration: 2000,\n                        easing: 'out',\n                        startup: true\n                    },\n                    'is3D':true,\n                    'vAxis': {\n                        title: \"Αριθμός διαβουλεύσεων\",\n                        viewWindow:{\n                            max:max,\n                            min:0\n                        },format: '#',\n                        gridlines: {\n                            count: max + 1\n                        }\n                    },\n                    legend: {position: 'none',alignment:'start'},\n                    'fontSize' : 15\n                };\n\n                var chart;\n                switch(chartType) {\n                    case 'bar':\n                        chart = new google.visualization.ColumnChart(document.getElementById(chartId));\n                        break;\n                    case 'pie':\n                        chart = new google.visualization.PieChart(document.getElementById(chartId));\n                        break;\n                    default:\n                        break\n                }\n                chart.draw(data, options);\n        },\n        render: function() {\n            if(this.state.display) {\n                if (this.state.busy) {\n                    return (\n                        <div>\n                            <scify.ReactLoader display={this.state.busy}/>\n                        </div>\n                    );\n                }\n            }\n            return (\n                <div></div>\n            );\n        }\n    });\n\n})()\n\n\n"]}